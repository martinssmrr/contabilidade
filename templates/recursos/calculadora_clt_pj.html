{% extends 'base.html' %}
{% load static %}

{% block title %}Calculadora CLT vs. PJ - Vetorial{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/calculadora.css' %}">
{% endblock %}

{% block content %}
<section class="calculadora-section">
    <div class="container">
        <!-- Header -->
        <div class="calculadora-header">
            <h1> Calculadora CLT vs. PJ</h1>
            <p>Compare quanto voc√™ receberia como CLT ou PJ e tome a melhor decis√£o para sua carreira</p>
        </div>
        
        <!-- Formul√°rio -->
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="calculadora-card">
                    <form method="POST">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="salario_bruto" class="form-label">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="me-2 svg-inline" viewBox="0 0 16 16">
                                    <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                                </svg>
                                Sal√°rio Bruto Mensal
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="salario_bruto" 
                                name="salario_bruto" 
                                placeholder="Ex: 5000.00"
                                step="0.01"
                                min="0"
                                value="{{ salario_bruto|default:'' }}"
                                required
                            >
                            <small class="text-muted">Informe o valor do seu sal√°rio ou faturamento mensal</small>
                        </div>
                        
                        <button type="submit" class="btn-calcular">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="me-2 svg-inline" viewBox="0 0 16 16">
                                <path d="M6 13.5A1.5 1.5 0 0 1 7.5 12h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1A1.5 1.5 0 0 1 6 14.5v-1zM2.5 3A1.5 1.5 0 0 1 4 1.5h8A1.5 1.5 0 0 1 13.5 3v8a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 11V3zM4 2.5a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H4z"/>
                            </svg>
                            Calcular
                        </button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Resultados -->
        {% if resultados %}
        <div class="mt-5">
            <div class="resultado-header">
                <h2>üìä Resultados da Compara√ß√£o</h2>
                <p class="text-muted">Sal√°rio Bruto: <strong>R$ {{ resultados.salario_bruto|floatformat:2 }}</strong></p>
            </div>
            
            <div class="row">
                <!-- CLT -->
                <div class="col-lg-6 mb-4">
                    <div class="resultado-card clt">
                        <div class="text-center">
                            <span class="regime-badge clt">CLT</span>
                        </div>
                        
                        <div class="salario-bruto">
                            Sal√°rio Bruto: <strong>R$ {{ resultados.salario_bruto|floatformat:2 }}</strong>
                        </div>
                        
                        <h5 class="mb-3 h5-strong">Descontos:</h5>
                        
                        <div class="desconto-item">
                            <span class="desconto-label">INSS</span>
                            <span class="desconto-valor">- R$ {{ resultados.clt_inss|floatformat:2 }}</span>
                        </div>
                        
                        <div class="desconto-item">
                            <span class="desconto-label">IRRF (Imposto de Renda)</span>
                            <span class="desconto-valor">- R$ {{ resultados.clt_irrf|floatformat:2 }}</span>
                        </div>
                        
                        <div class="total-descontos">
                            <div class="desconto-item">
                                <span class="desconto-label"><strong>Total de Descontos</strong></span>
                                <span class="desconto-valor"><strong>- R$ {{ resultados.clt_total_descontos|floatformat:2 }}</strong></span>
                            </div>
                        </div>
                        
                        <div class="salario-liquido">
                            <div class="salario-liquido-label">Sal√°rio L√≠quido Mensal</div>
                            <div class="salario-liquido-valor">R$ {{ resultados.clt_salario_liquido|floatformat:2 }}</div>
                        </div>
                        
                        <div class="beneficios-section">
                            <div class="beneficios-title">
                                ‚ú® Benef√≠cios Anuais (n√£o inclusos no l√≠quido)
                            </div>
                            <div class="beneficio-item">
                                <span>13¬∫ Sal√°rio</span>
                                <strong class="text-accent-clt">R$ {{ resultados.clt_decimo_terceiro|floatformat:2 }}</strong>
                            </div>
                            <div class="beneficio-item">
                                <span>F√©rias + 1/3</span>
                                <strong class="text-accent-clt">R$ {{ resultados.clt_ferias|floatformat:2 }}</strong>
                            </div>
                            <div class="beneficio-item">
                                <span>FGTS (8% ao ano)</span>
                                <strong class="text-accent-clt">R$ {{ resultados.clt_fgts_anual|floatformat:2 }}</strong>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- PJ -->
                <div class="col-lg-6 mb-4">
                    <div class="resultado-card pj">
                        <div class="text-center">
                            <span class="regime-badge pj">PJ (Pessoa Jur√≠dica)</span>
                        </div>
                        
                        <div class="salario-bruto">
                            Faturamento Bruto: <strong>R$ {{ resultados.salario_bruto|floatformat:2 }}</strong>
                        </div>
                        
                        <h5 class="mb-3 h5-strong">Impostos:</h5>
                        
                        <div class="desconto-item">
                            <span class="desconto-label">Simples Nacional ({{ resultados.pj_aliquota }}%)</span>
                            <span class="desconto-valor">- R$ {{ resultados.pj_imposto|floatformat:2 }}</span>
                        </div>
                        
                        <div class="total-descontos pj">
                            <div class="desconto-item">
                                <span class="desconto-label"><strong>Total de Impostos</strong></span>
                                <span class="desconto-valor"><strong>- R$ {{ resultados.pj_imposto|floatformat:2 }}</strong></span>
                            </div>
                        </div>
                        
                        <div class="salario-liquido">
                            <div class="salario-liquido-label">Faturamento L√≠quido Mensal</div>
                            <div class="salario-liquido-valor">R$ {{ resultados.pj_salario_liquido|floatformat:2 }}</div>
                        </div>
                        
                        <div class="beneficios-section beneficios-pj" style="margin-top: 2.9rem;">
                            <div class="beneficios-title">
                                ‚ö†Ô∏è Importante para PJ
                            </div>
                            <ul class="list-beneficios-pj">
                                <li>Sem 13¬∫ sal√°rio</li>
                                <li>Sem f√©rias remuneradas</li>
                                <li>Sem FGTS</li>
                                <li>Necess√°rio contribuir ao INSS separadamente</li>
                                <li>Custos operacionais (contador, etc.)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Compara√ß√£o Final -->
            <div class="comparacao-final">
                <div class="comparacao-title">üéØ Diferen√ßa Mensal</div>
                
                {% if resultados.diferenca > 0 %}
                    <p class="text-muted-small">
                        Como <strong class="text-accent-pj">PJ</strong>, voc√™ receberia:
                    </p>
                    <div class="diferenca-valor positiva">
                        + R$ {{ resultados.diferenca|floatformat:2 }}
                    </div>
                    <div class="diferenca-percentual">
                        ({{ resultados.diferenca_percentual|floatformat:1 }}% a mais por m√™s)
                    </div>
                {% else %}
                    <p class="text-muted-small">
                        Como <strong class="text-accent-clt">CLT</strong>, voc√™ receberia:
                    </p>
                    <div class="diferenca-valor negativa">
                        R$ {{ resultados.diferenca|floatformat:2 }}
                    </div>
                    <div class="diferenca-percentual">
                        ({{ resultados.diferenca_percentual|floatformat:1 }}% a menos por m√™s como PJ)
                    </div>
                {% endif %}
            </div>
            
            <!-- Aviso Importante -->
            <div class="aviso-importante">
                <h6>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    Aviso Importante
                </h6>
                <ul>
                    <li><strong>Esta √© uma estimativa simplificada.</strong> Os c√°lculos reais podem variar conforme sua situa√ß√£o espec√≠fica.</li>
                    <li>Para PJ, consideramos apenas a al√≠quota inicial do Simples Nacional (6%). A al√≠quota real varia conforme o faturamento acumulado.</li>
                    <li>N√£o foram considerados: dependentes, dedu√ß√µes m√©dicas, pens√£o aliment√≠cia, pr√≥-labore, distribui√ß√£o de lucros, entre outros.</li>
                    <li>Como PJ, voc√™ precisa reservar valores para f√©rias, 13¬∫ sal√°rio e previd√™ncia, que n√£o est√£o inclusos no c√°lculo.</li>
                    <li><strong>Recomendamos consultar um contador</strong> para uma an√°lise completa e personalizada da sua situa√ß√£o.</li>
                </ul>
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
