{% extends 'base.html' %}
{% load static %}

{% block title %}Calculadora CLT vs. PJ - Vetorial{% endblock %}

{% block extra_css %}
<style>
    .calculadora-section {
        padding: 120px 0 80px 0;
        background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
        min-height: 100vh;
    }
    
    .calculadora-header {
        text-align: center;
        margin-bottom: 3rem;
    }
    
    .calculadora-header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 1rem;
    }
    
    .calculadora-header p {
        font-size: 1.1rem;
        color: #6b7280;
        max-width: 700px;
        margin: 0 auto;
    }
    
    .calculadora-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        padding: 2.5rem;
        margin-bottom: 2rem;
        transition: all 0.3s ease;
    }
    
    .calculadora-card:hover {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    }
    
    .form-label {
        font-weight: 600;
        color: #374151;
        margin-bottom: 0.5rem;
    }
    
    .form-control {
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        font-size: 1.1rem;
        transition: all 0.3s ease;
    }
    
    .form-control:focus {
        border-color: #3ef47c;
        box-shadow: 0 0 0 3px rgba(62, 244, 124, 0.1);
    }
    
    .btn-calcular {
        background: linear-gradient(135deg, #3ef47c 0%, #2ed66b 100%);
        color: white;
        border: none;
        padding: 1rem 3rem;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 8px;
        transition: all 0.3s ease;
        width: 100%;
        margin-top: 1rem;
    }
    
    .btn-calcular:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(62, 244, 124, 0.3);
    }
    
    .resultado-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .resultado-header h2 {
        font-size: 2rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 0.5rem;
    }
    
    .resultado-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        padding: 2rem;
        height: 100%;
        transition: all 0.3s ease;
        border: 3px solid transparent;
    }
    
    .resultado-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);
    }
    
    .resultado-card.clt {
        border-color: #0c63d1;
    }
    
    .resultado-card.pj {
        border-color: #3ef47c;
    }
    
    .regime-badge {
        display: inline-block;
        padding: 0.5rem 1.5rem;
        border-radius: 50px;
        font-weight: 700;
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
    }
    
    .regime-badge.clt {
        background: linear-gradient(135deg, #0c63d1 0%, #0a4fa3 100%);
        color: white;
    }
    
    .regime-badge.pj {
        background: linear-gradient(135deg, #3ef47c 0%, #2ed66b 100%);
        color: white;
    }
    
    .salario-bruto {
        font-size: 0.9rem;
        color: #6b7280;
        margin-bottom: 1rem;
    }
    
    .desconto-item {
        display: flex;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .desconto-item:last-child {
        border-bottom: none;
    }
    
    .desconto-label {
        font-weight: 500;
        color: #374151;
    }
    
    .desconto-valor {
        font-weight: 600;
        color: #ef4444;
    }
    
    .desconto-valor.positivo {
        color: #10b981;
    }
    
    .total-descontos {
        background: #fef2f2;
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
    }
    
    .total-descontos.pj {
        background: #fef3f2;
    }
    
    .salario-liquido {
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        padding: 1.5rem;
        border-radius: 12px;
        margin: 1.5rem 0;
        text-align: center;
    }
    
    .salario-liquido-label {
        font-size: 0.9rem;
        font-weight: 600;
        color: #166534;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .salario-liquido-valor {
        font-size: 2.5rem;
        font-weight: 800;
        color: #15803d;
        margin-top: 0.5rem;
    }
    
    .beneficios-section {
        background: #eff6ff;
        padding: 1.5rem;
        border-radius: 12px;
        margin-top: 1.5rem;
    }
    
    .beneficios-title {
        font-weight: 700;
        color: #1e40af;
        margin-bottom: 1rem;
        font-size: 1rem;
    }
    
    .beneficio-item {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        font-size: 0.95rem;
    }
    
    .comparacao-final {
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        padding: 2rem;
        margin-top: 2rem;
        text-align: center;
    }
    
    .comparacao-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 1.5rem;
    }
    
    .diferenca-valor {
        font-size: 2rem;
        font-weight: 800;
        margin: 1rem 0;
    }
    
    .diferenca-valor.positiva {
        color: #10b981;
    }
    
    .diferenca-valor.negativa {
        color: #ef4444;
    }
    
    .diferenca-percentual {
        font-size: 1.2rem;
        font-weight: 600;
        color: #6b7280;
    }
    
    .aviso-importante {
        background: #fffbeb;
        border-left: 4px solid #f59e0b;
        padding: 1.5rem;
        border-radius: 8px;
        margin-top: 2rem;
    }
    
    .aviso-importante h6 {
        color: #92400e;
        font-weight: 700;
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .aviso-importante ul {
        margin: 0;
        padding-left: 1.5rem;
        color: #78350f;
    }
    
    .aviso-importante li {
        margin-bottom: 0.5rem;
    }
    
    @media (max-width: 768px) {
        .calculadora-header h1 {
            font-size: 1.8rem;
        }
        
        .salario-liquido-valor {
            font-size: 2rem;
        }
        
        .diferenca-valor {
            font-size: 1.5rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<section class="calculadora-section">
    <div class="container">
        <!-- Header -->
        <div class="calculadora-header">
            <h1> Calculadora CLT vs. PJ</h1>
            <p>Compare quanto voc√™ receberia como CLT ou PJ e tome a melhor decis√£o para sua carreira</p>
        </div>
        
        <!-- Formul√°rio -->
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="calculadora-card">
                    <form method="POST">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="salario_bruto" class="form-label">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="me-2" viewBox="0 0 16 16" style="vertical-align: middle;">
                                    <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                                </svg>
                                Sal√°rio Bruto Mensal
                            </label>
                            <input 
                                type="number" 
                                class="form-control" 
                                id="salario_bruto" 
                                name="salario_bruto" 
                                placeholder="Ex: 5000.00"
                                step="0.01"
                                min="0"
                                value="{{ salario_bruto|default:'' }}"
                                required
                            >
                            <small class="text-muted">Informe o valor do seu sal√°rio ou faturamento mensal</small>
                        </div>
                        
                        <button type="submit" class="btn-calcular">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="me-2" viewBox="0 0 16 16" style="vertical-align: middle;">
                                <path d="M6 13.5A1.5 1.5 0 0 1 7.5 12h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1A1.5 1.5 0 0 1 6 14.5v-1zM2.5 3A1.5 1.5 0 0 1 4 1.5h8A1.5 1.5 0 0 1 13.5 3v8a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 11V3zM4 2.5a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H4z"/>
                            </svg>
                            Calcular
                        </button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Resultados -->
        {% if resultados %}
        <div class="mt-5">
            <div class="resultado-header">
                <h2>üìä Resultados da Compara√ß√£o</h2>
                <p class="text-muted">Sal√°rio Bruto: <strong>R$ {{ resultados.salario_bruto|floatformat:2 }}</strong></p>
            </div>
            
            <div class="row">
                <!-- CLT -->
                <div class="col-lg-6 mb-4">
                    <div class="resultado-card clt">
                        <div class="text-center">
                            <span class="regime-badge clt">CLT</span>
                        </div>
                        
                        <div class="salario-bruto">
                            Sal√°rio Bruto: <strong>R$ {{ resultados.salario_bruto|floatformat:2 }}</strong>
                        </div>
                        
                        <h5 class="mb-3" style="color: #374151; font-weight: 700;">Descontos:</h5>
                        
                        <div class="desconto-item">
                            <span class="desconto-label">INSS</span>
                            <span class="desconto-valor">- R$ {{ resultados.clt_inss|floatformat:2 }}</span>
                        </div>
                        
                        <div class="desconto-item">
                            <span class="desconto-label">IRRF (Imposto de Renda)</span>
                            <span class="desconto-valor">- R$ {{ resultados.clt_irrf|floatformat:2 }}</span>
                        </div>
                        
                        <div class="total-descontos">
                            <div class="desconto-item">
                                <span class="desconto-label"><strong>Total de Descontos</strong></span>
                                <span class="desconto-valor"><strong>- R$ {{ resultados.clt_total_descontos|floatformat:2 }}</strong></span>
                            </div>
                        </div>
                        
                        <div class="salario-liquido">
                            <div class="salario-liquido-label">Sal√°rio L√≠quido Mensal</div>
                            <div class="salario-liquido-valor">R$ {{ resultados.clt_salario_liquido|floatformat:2 }}</div>
                        </div>
                        
                        <div class="beneficios-section">
                            <div class="beneficios-title">
                                ‚ú® Benef√≠cios Anuais (n√£o inclusos no l√≠quido)
                            </div>
                            <div class="beneficio-item">
                                <span>13¬∫ Sal√°rio</span>
                                <strong style="color: #1e40af;">R$ {{ resultados.clt_decimo_terceiro|floatformat:2 }}</strong>
                            </div>
                            <div class="beneficio-item">
                                <span>F√©rias + 1/3</span>
                                <strong style="color: #1e40af;">R$ {{ resultados.clt_ferias|floatformat:2 }}</strong>
                            </div>
                            <div class="beneficio-item">
                                <span>FGTS (8% ao ano)</span>
                                <strong style="color: #1e40af;">R$ {{ resultados.clt_fgts_anual|floatformat:2 }}</strong>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- PJ -->
                <div class="col-lg-6 mb-4">
                    <div class="resultado-card pj">
                        <div class="text-center">
                            <span class="regime-badge pj">PJ (Pessoa Jur√≠dica)</span>
                        </div>
                        
                        <div class="salario-bruto">
                            Faturamento Bruto: <strong>R$ {{ resultados.salario_bruto|floatformat:2 }}</strong>
                        </div>
                        
                        <h5 class="mb-3" style="color: #374151; font-weight: 700;">Impostos:</h5>
                        
                        <div class="desconto-item">
                            <span class="desconto-label">Simples Nacional ({{ resultados.pj_aliquota }}%)</span>
                            <span class="desconto-valor">- R$ {{ resultados.pj_imposto|floatformat:2 }}</span>
                        </div>
                        
                        <div class="total-descontos pj">
                            <div class="desconto-item">
                                <span class="desconto-label"><strong>Total de Impostos</strong></span>
                                <span class="desconto-valor"><strong>- R$ {{ resultados.pj_imposto|floatformat:2 }}</strong></span>
                            </div>
                        </div>
                        
                        <div class="salario-liquido">
                            <div class="salario-liquido-label">Faturamento L√≠quido Mensal</div>
                            <div class="salario-liquido-valor">R$ {{ resultados.pj_salario_liquido|floatformat:2 }}</div>
                        </div>
                        
                        <div class="beneficios-section" style="background: #fef3f2; margin-top: 2.9rem;">
                            <div class="beneficios-title" style="color: #991b1b;">
                                ‚ö†Ô∏è Importante para PJ
                            </div>
                            <ul style="margin: 0; padding-left: 1.5rem; font-size: 0.9rem; color: #7f1d1d;">
                                <li>Sem 13¬∫ sal√°rio</li>
                                <li>Sem f√©rias remuneradas</li>
                                <li>Sem FGTS</li>
                                <li>Necess√°rio contribuir ao INSS separadamente</li>
                                <li>Custos operacionais (contador, etc.)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Compara√ß√£o Final -->
            <div class="comparacao-final">
                <div class="comparacao-title">üéØ Diferen√ßa Mensal</div>
                
                {% if resultados.diferenca > 0 %}
                    <p style="color: #6b7280; font-size: 1.1rem;">
                        Como <strong style="color: #3ef47c;">PJ</strong>, voc√™ receberia:
                    </p>
                    <div class="diferenca-valor positiva">
                        + R$ {{ resultados.diferenca|floatformat:2 }}
                    </div>
                    <div class="diferenca-percentual">
                        ({{ resultados.diferenca_percentual|floatformat:1 }}% a mais por m√™s)
                    </div>
                {% else %}
                    <p style="color: #6b7280; font-size: 1.1rem;">
                        Como <strong style="color: #0c63d1;">CLT</strong>, voc√™ receberia:
                    </p>
                    <div class="diferenca-valor negativa">
                        R$ {{ resultados.diferenca|floatformat:2 }}
                    </div>
                    <div class="diferenca-percentual">
                        ({{ resultados.diferenca_percentual|floatformat:1 }}% a menos por m√™s como PJ)
                    </div>
                {% endif %}
            </div>
            
            <!-- Aviso Importante -->
            <div class="aviso-importante">
                <h6>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    Aviso Importante
                </h6>
                <ul>
                    <li><strong>Esta √© uma estimativa simplificada.</strong> Os c√°lculos reais podem variar conforme sua situa√ß√£o espec√≠fica.</li>
                    <li>Para PJ, consideramos apenas a al√≠quota inicial do Simples Nacional (6%). A al√≠quota real varia conforme o faturamento acumulado.</li>
                    <li>N√£o foram considerados: dependentes, dedu√ß√µes m√©dicas, pens√£o aliment√≠cia, pr√≥-labore, distribui√ß√£o de lucros, entre outros.</li>
                    <li>Como PJ, voc√™ precisa reservar valores para f√©rias, 13¬∫ sal√°rio e previd√™ncia, que n√£o est√£o inclusos no c√°lculo.</li>
                    <li><strong>Recomendamos consultar um contador</strong> para uma an√°lise completa e personalizada da sua situa√ß√£o.</li>
                </ul>
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
